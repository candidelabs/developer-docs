---
title: Paymaster API
description: JSON-RPC API reference for Candide's Paymaster service. Learn about sponsoring gas, and how to enable gas payments in stablecoins
image: /img/posters/paymaster-meta.png
keywords: [paymaster, gas sponsorship, pay gas in stablecoin]
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { DataTable } from "/src/components/Table";

import { userOperationReturnParamsV06, userOperationParamV07 } from "/src/data/userOperation"
import { 
  candidePaymasterContext,
  tokensParamatersV3,
  paymasterMetadataReturnParametersV06,
  paymasterMetadataReturnParametersV07,
  pm_supportedEntryPointsReturnParams, 
  pm_sponsorUserOperationReturnParamsV07, 
  pm_sponsorUserOperationReturnParamsV06 
} from "/src/data/paymaster"


# Paymaster API V3 RPC Methods

JSON-RPC API reference for Candide's Paymaster V3 service.

:::info
Visit the [dashboard](https://dashboard.candide.dev) to get an API key for Candide's Paymaster. Looking for [V2](./0-rpc-methods-v2.mdx)?  
:::

## Entrypoint V0.7

### pm_supportedERC20Tokens

Gets supported ERC-20 Tokens for gas payments, along side the paymaster metadata

#### Invocation

```json
{ "method": "pm_supportedERC20Tokens", "params": [entrypoint: string] }
```

#### Return

```json
{ 
  "result": {
    paymasterMetadata: {
      name: string,
      description: string,
      icons: string[],
      address: string,
      sponsoredEventTopic: string,
      dummyPaymasterAndData: {
        paymaster: string,
        paymasterData: string,
        paymasterVerificationGasLimit: string,
        paymasterPostOpGasLimit: string
    },
    },
    tokens: [{
      name: string,
      symbol: string,
      address: string,
      decimals: number,
      exchangeRate: string,
    }]
  } 
}
```

<Tabs>
<TabItem value="request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_supportedERC20Tokens",
  "params": ["0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789"]
}
```

</TabItem>
<TabItem value="response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "paymasterMetadata": {
      "name": "Candide Paymaster",
      "description": "Candide Paymaster a fast, secure and feature-rich 4337 Paymaster",
      "icons": [],
      "address": "0x7e3393ebA62DA6f555a5341E079e0F6585CE8c56",
      "sponsoredEventTopic": "0x13..fa1",
      "dummyPaymasterAndData": {
        "paymaster": "0x...",
        "paymasterData": "0x...",
        "paymasterVerificationGasLimit": "0x...",
        "paymasterPostOpGasLimit": "0x..."
      }
    },
    "tokens": [{
      "name": "Maker DAI",
      "symbol": "DAI",
      "address": "0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",
      "decimal": "0x12",
      "exchangeRate": "0x0ddeb609310c89b1"
    }]
  }
}
```

</TabItem>

<TabItem value="response type" label="Response Types">

<table>
  <thead>
    <th align="left">Paramater</th>
    <th align="left">Type</th>
  </thead>
  <tbody>
    <tr>
      <td align="left">paymasterMetadata</td>
      <td align="left">
        <p>Object</p>
        <DataTable items={paymasterMetadataReturnParametersV07} />
      </td>
    </tr>
    <tr>
      <td align="left">tokens</td>
      <td align="left">
        <p>Object[]</p>
        <DataTable items={tokensParamatersV3} />
      </td>
    </tr>
  </tbody>
</table>

</TabItem>
</Tabs>

### pm_sponsorUserOperation

Sends a UserOperation to a paymaster for off-chain verification. If approved, it will return the `paymasterData`. It will also return gas overrides when the mode for gas sponsorship uses a Gas Policy.

- **ERC-20s Gas Payments**: No gas overrides are returned
- **Gas Policies**: Mandatory `callGasLimit`, `verificationGasLimit`, `preVerificationGas`, `maxFeePerGas`, and `maxPriorityFeePerGas` fields are returned.

Supports two types of Gas Policies:

- **Public Gas Policies**: These are gas policies provided by third parties, which do not require a sponsorship policy ID.
- **Private Gas Policies**: These require a sponsorship policy ID and can be used if no public gas policy matches the user operation.

If the paymaster rejects the UserOperation, it returns a standard JSON-RPC error with the reason.

#### Invocation

```json
{ "method": "pm_sponsorUserOperation", "params": [userOperation: object, entrypoint: string, context: object] }
```

#### Return

```json
{
  "result": {
    paymaster: string,
    paymasterData: string,
    paymasterVerificationGasLimit: string,
    paymasterPostOpGasLimit: string,
    callGasLimit?: string,
    verificationGasLimit?: string,
    preVerificationGas?: string,
    maxFeePerGas?: string,
    maxPriorityFeePerGas?: string,
    sponsorMetadata?: {
      name: string,
      description: string,
      url: string,
      icons: string[],
    }
  } 
}
```

<Tabs>
<TabItem value="request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_sponsorUserOperation",
    "params": [
    {
      "sender": "0x2c298CcaFF..c236fCC66dB2",
      "nonce": "0x17",
      "factory": "0x..",
      "factoryData": "0xf3....0000",
      "callData": "0xf3....0000",
      "callGasLimit": "0x12a87",
      "verificationGasLimit": "0x1a332",
      "preVerificationGas": "0xe95c",
      "maxFeePerGas": "0x5f4ecdc0",
      "maxPriorityFeePerGas": "0x59682f00",
      "paymaster": "0x..",
      "paymasterVerificationGasLimit": "0x..",
      "paymasterPostOpGasLimit": "0x..",
      "paymasterAndData": "0x",
      "signature": "0x",
    },
    "0x0000000071727De22E5E9d8BAf0edAc6f37da032",
    { "sponsorshipPolicyId" : "1234" } // sponsorshipPolicyId key value field is optional if using a private gas policy.
  ]
}
```

</TabItem>
<TabItem value="response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "paymaster": "0x..",
    "paymasterData": "0x..",
    "paymasterVerificationGasLimit": "0x..",
    "paymasterPostOpGasLimit": "0x..",
    "callGasLimit": "0x...",
    "verificationGasLimit": "0x...",
    "preVerificationGas": "0x..",
    "maxFeePerGas": "0x..",
    "maxPriorityFeePerGas": "0x..",
    "sponsorMetadata": {
      "name": "Aave",
      "description": "Open Source Liquidity Protocol",
      "url": "https://app.aave.com/",
      "icons": ["https://aave.com/aave-2030-header.svg"],
    }
  }
}
```

</TabItem>

<TabItem value="request type" label="Request Types">

<table>
  <thead>
    <th align="left">Paramater</th>
    <th align="left">Type</th>
  </thead>
  <tbody>
    <tr>
      <td align="left">userOperation</td>
      <td align="left">
        <p>Object</p>
        <DataTable items={userOperationParamV07} />
      </td>
    </tr>
    <tr>
      <td align="left">entrypoint</td>
      <td align="left">
        <table>
          <thead>
            <th align="left">Type</th>
            <th align="left">Description</th>
          </thead>
          <tr>
            <td>
              <code>string</code>
            </td>
            <td>Entrypoint address</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="left">context</td>
      <td align="left">
        <p>Object: This argument contains information about the specific paymaster
        implementation you are using. If use paying gas in ERC-20 Tokens, pass the token address.</p>
        <DataTable items={candidePaymasterContext} />
      </td>
    </tr>
  </tbody>
</table>

</TabItem>

<TabItem value="response type" label="Response Type">
  <DataTable items={pm_sponsorUserOperationReturnParamsV07} />
</TabItem>

</Tabs>

### pm_supportedEntryPoints

Returns the entryPoint addresses supported by the paymaster.

#### Invocation

```json
{ "method": "pm_supportedEntryPoints", "params": [] }
```

#### Return

```json
{ "result": string[] }
```

<Tabs>
<TabItem value="example request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_supportedEntryPoints",
  "params": []
}
```

</TabItem>

<TabItem value="example response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": ["0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789", "0x0000000071727de22e5e9d8baf0edac6f37da032"] // Entrypoint addresses
}
```

</TabItem>

<TabItem value="response type" label="Response Type">
  <DataTable items={pm_supportedEntryPointsReturnParams} />
  </TabItem> 
</Tabs>

### pm_chainId

Get Chain ID asks the paymaster service to return the chain_id it currently supports

#### Invocation

```json
{ "method": "pm_chainId", "params": [] }
```

#### Return

```json
{ "result": number }
```

<Tabs>
<TabItem value="example request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_chainId",
  "params": []
}
```

</TabItem>

<TabItem value="example response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": 1
}
```

</TabItem>

<TabItem value="response type" label="Response Type">
  <table>
    <thead>
      <th align="left">Paramater</th>
      <th align="left">Type</th>
      <th align="left">Description</th>
    </thead>
    <tbody>
      <tr>
        <td align="left">chainId</td>
        <td align="left">
          <code>
            <font color="#e25894">number</font>
          </code>
        </td>
        <td align="left">
          Chain ID that the paymaster supports
        </td>
      </tr>
    </tbody>
  </table>
</TabItem>
</Tabs>

## Entrypoint V0.6

### pm_supportedERC20Tokens

Gets supported ERC-20 Tokens for gas payments, along side the paymaster metadata

#### Invocation

```json
{ "method": "pm_supportedERC20Tokens", "params": [entrypoint: string] }
```

#### Return

```json
{ 
  "result": {
    paymasterMetadata: {
      name: string,
      description: string,
      icons: string[],
      address: string,
      sponsoredEventTopic: string,
      dummyPaymasterAndData: string,
    },
    tokens: [{
      name: string,
      symbol: string,
      address: string,
      decimals: number,
      exchangeRate: string,
    }]
  } 
}
```

<Tabs>
<TabItem value="request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_supportedERC20Tokens",
  "params": ["0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789"]
}
```

</TabItem>
<TabItem value="response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "paymasterMetadata": {
      "name": "Candide Paymaster",
      "description": "Candide Paymaster a fast, secure and feature-rich 4337 Paymaster",
      "icons": [],
      "address": "0x7e3393ebA62DA6f555a5341E079e0F6585CE8c56",
      "sponsoredEventTopic": "0x13..fa1",
      "dummyPaymasterAndData": "0x69...135",
    },
    "tokens": [{
      "name": "Maker DAI",
      "symbol": "DAI",
      "address": "0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",
      "decimal": "0x12",
      "exchangeRate": "0x0ddeb609310c89b1"
    }]
  }
}
```

</TabItem>

<TabItem value="response type" label="Response Types">

<table>
  <thead>
    <th align="left">Paramater</th>
    <th align="left">Type</th>
  </thead>
  <tbody>
    <tr>
      <td align="left">paymasterMetadata</td>
      <td align="left">
        <p>Object</p>
        <DataTable items={paymasterMetadataReturnParametersV06} />
      </td>
    </tr>
    <tr>
      <td align="left">tokens</td>
      <td align="left">
        <p>Object[]</p>
        <DataTable items={tokensParamatersV3} />
      </td>
    </tr>
  </tbody>
</table>

</TabItem>
</Tabs>

### pm_sponsorUserOperation

Sends a UserOperation to a paymaster for off-chain verification. If approved, it will return the `paymasterData`. It will also return gas overrides when the mode for gas sponsorship uses a Gas Policy.

- **ERC-20s Gas Payments**: No gas overrides are returned
- **Gas Policies**: Mandatory `callGasLimit`, `verificationGasLimit`, `preVerificationGas`, `maxFeePerGas`, and `maxPriorityFeePerGas` fields are returned.

Supports two types of Gas Policies:

- **Public Gas Policies**: These are gas policies provided by third parties, which do not require a sponsorship policy ID.
- **Private Gas Policies**: These require a sponsorship policy ID and can be used if no public gas policy matches the user operation.

If the paymaster rejects the UserOperation, it returns a standard JSON-RPC error with the reason.

#### Invocation

```json
{ "method": "pm_sponsorUserOperation", "params": [userOperation: object, entrypoint: string, context: object] }
```

#### Return

```json
{
  "result": {
    paymasterAndData: string,
    callGasLimit?: string,
    verificationGasLimit?: string,
    preVerificationGas?: string,
    maxFeePerGas?: string,
    maxPriorityFeePerGas?: string,
    sponsorMetadata?: {
      name: string,
      description: string,
      url: string,
      icons: string[],
    }
  } 
}
```

<Tabs>
<TabItem value="request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_sponsorUserOperation",
    "params": [
    {
      "sender": "0x2c298CcaFF..c236fCC66dB2",
      "nonce": "0x17",
      "initCode": "0x",
      "callData": "0xf3....0000",
      "callGasLimit": "0x12a87",
      "verificationGasLimit": "0x1a332",
      "preVerificationGas": "0xe95c",
      "maxFeePerGas": "0x5f4ecdc0",
      "maxPriorityFeePerGas": "0x59682f00",
      "paymasterAndData": "0x",
      "signature": "0x",
    },
    "0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",
    { "sponsorshipPolicyId" : "1234" } // sponsorshipPolicyId key value field is optional if using a private gas policy. 
  ]
}
```

</TabItem>
<TabItem value="response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "paymasterAndData": "0x....",
    "callGasLimit": "0x...",
    "verificationGasLimit": "0x...",
    "preVerificationGas": "0x..",
    "maxFeePerGas": "0x..",
    "maxPriorityFeePerGas": "0x..",
    "sponsorMetadata": {
      "name": "Aave",
      "description": "Open Source Liquidity Protocol",
      "url": "https://app.aave.com/",
      "icons": ["https://aave.com/aave-2030-header.svg"],
    }
  }
}
```

</TabItem>

<TabItem value="request type" label="Request Types">

<table>
  <thead>
    <th align="left">Paramater</th>
    <th align="left">Type</th>
  </thead>
  <tbody>
    <tr>
      <td align="left">userOperation</td>
      <td align="left">
        <p>Object</p>
        <DataTable items={userOperationReturnParamsV06} />
      </td>
    </tr>
    <tr>
      <td align="left">entrypoint</td>
      <td align="left">
        <table>
          <thead>
            <th align="left">Type</th>
            <th align="left">Description</th>
          </thead>
          <tr>
            <td>
              <code>string</code>
            </td>
            <td>Entrypoint address</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="left">context</td>
      <td align="left">
        <p>Object: This argument contains information about the specific paymaster
        implementation you are using. If use paying gas in ERC-20 Tokens, pass the token address.</p>
        <DataTable items={candidePaymasterContext} />
      </td>
    </tr>
  </tbody>
</table>

</TabItem>

<TabItem value="response type" label="Response Type">
  <DataTable items={pm_sponsorUserOperationReturnParamsV06} />
</TabItem>

</Tabs>

### pm_supportedEntryPoints

Returns the entryPoint addresses supported by the paymaster.

#### Invocation

```json
{ "method": "pm_supportedEntryPoints", "params": [] }
```

#### Return

```json
{ "result": string[] }
```

<Tabs>
<TabItem value="example request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_supportedEntryPoints",
  "params": []
}
```

</TabItem>

<TabItem value="example response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": ["0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789", "0x0000000071727de22e5e9d8baf0edac6f37da032"] // Entrypoint addresses
}
```

</TabItem>

<TabItem value="response type" label="Response Type">
  <DataTable items={pm_supportedEntryPointsReturnParams} />
  </TabItem>
</Tabs>

### pm_chainId

Get Chain ID asks the paymaster service to return the chain_id it currently supports

#### Invocation

```json
{ "method": "pm_chainId", "params": [] }
```

#### Return

```json
{ "result": number }
```

<Tabs>
<TabItem value="example request" label="Example Request">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "method": "pm_chainId",
  "params": []
}
```

</TabItem>

<TabItem value="example response" label="Example Response">

```json
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": 1
}
```

</TabItem>

<TabItem value="response type" label="Response Type">
  <table>
    <thead>
      <th align="left">Paramater</th>
      <th align="left">Type</th>
      <th align="left">Description</th>
    </thead>
    <tbody>
      <tr>
        <td align="left">chainId</td>
        <td align="left">
          <code>
            <font color="#e25894">number</font>
          </code>
        </td>
        <td align="left">
          Chain ID that the paymaster supports
        </td>
      </tr>
    </tbody>
  </table>
  </TabItem>
  </Tabs>
  